//	2dgate library
//	code by j113203 { wtapss: +852 91738490 , j113203@gmail.com }
var $2dgate={JSONP:{get:function(t,e,n){$.ajaxSetup({cache:!0}),$.getScript($2dgate.Setup.Proxy+encodeURIComponent(t)+"&callback=$2dgate.JSONP.finished.resolve").done(function(t,n){$.when($2dgate.JSONP.finished).done(function(t){try{return e(t.contents)}catch(n){}return e(t)})}).fail(function(r,i,a){$.getScript("//query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select content from data.headers where url="'+t+'"')+"&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&format=json&callback=$2dgate.JSONP.finished.resolve").done(function(t,n){$.when($2dgate.JSONP.finished).done(function(t){try{return e(t.query.results.resources.content)}catch(n){}return e(t)})}).fail(function(t,e,r){return n()})})},finished:$.Deferred()},Setup:{Proxy:"http://user.frdm.info/ckhung/i/ba-simple-proxy.php?url="},FanHuaJi:function(t,e,n){$2dgate.JSONP.get("https://sctctw.2d-gate.org/api.php?text="+t+"&to="+e,function(t){n("string"==typeof t?$.parseJSON(t):t)})},Anime:{tid:function(t,e){$2dgate.JSONP.get("http://2d-gate.org/thread-"+t+"-1-1.html",function(t){var n=[];return t=$(t),n.push({subject:t.find("a#thread_subject").children().remove().end().text(),extra:t.find("h1:eq(1)").text(),intro:t.find("span.intro").text()}),a=t,e(n)})},weeks:function(t,e){$2dgate.JSONP.get("http://2d-gate.org/forum-78-1.html",function(n){var r=[];return $.each($(n.replace(/<(script|img)[^>]+?\/>|<(script|img)(.|\s)*?\/(script|img)>/gi,"")).find("table#olAL tbody").children(),function(e,n){return $(n).find("th:eq(0)").text()!=t?!0:($.each($(n).find("td:eq(0)").children(),function(t,e){var n=$(e);r.push({subject:n.text(),tid:n.attr("href").match(/thread-(.*?)-.*-.*\.html/)[1]})}),!1)}),e(r)})},list:function(t){$2dgate.JSONP.get("http://anime.2d-gate.org/__cache.html",function(e){var n=[];return $.each($(e.replace(/<(script|img)[^>]+?\/>|<(script|img)(.|\s)*?\/(script|img)>/gi,"")).filter("table#animeList").children("tbody").children(),function(t,e){var r=$(e);n.push({subject:r.find("td:eq(6)").html(),year:r.find("td:eq(1)").text(),season:r.find("td:eq(2)").text(),views:r.find("td:eq(3)").text(),dateline:r.find("td:eq(4)").text(),lastpost:r.find("td:eq(5)").text(),tid:r.find("td:eq(0) a").attr("href").match(/thread-(.*?)-.*-.*\.html/)[1]})}),t(n)})},list_:function(t){$2dgate.JSONP.get("http://anime.2d-gate.org/?jsonOnly=1",function(e){try{return t(e.json.threads)}catch(n){}return t($.parseJSON(e.split("\n").pop()).threads)})}},thumbnail:function(t,e,n){return e&&(e="&w="+e),n&&(n="&h="+n),"http://thumbnail.2d-gate.org/?src="+t+(e||"")+(n||"")}};