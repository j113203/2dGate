//	2dgate library
//	code by j113203 { wtapss: +852 91738490 , j113203@gmail.com }
var $2dgate={JSONP:{get:function(c,e,b){$.ajaxSetup({cache:true});var d=Math.floor(Math.random()*10000000000);$2dgate.JSONP.finished[d]=$.Deferred();$.getScript($2dgate.Setup.Proxy+encodeURIComponent(c)+"&callback=$2dgate.JSONP.finished["+d+"].resolve").done(function(f,g){$.when($2dgate.JSONP.finished[d]).done(function(h){$2dgate.JSONP.finished[d]=undefined;return e(h.contents||h.data||h[Object.keys(h)[0]]||h)})}).fail(function(h,g,f){$.getScript("//query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select content from data.headers where url="'+c+'"')+"&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&format=json&callback=$2dgate.JSONP.finished["+d+"].resolve").done(function(i,j){$.when($2dgate.JSONP.finished[d]).done(function(k){$2dgate.JSONP.finished[d]=undefined;return e(k.query.results.resources.content||k)})}).fail(function(k,j,i){return b()})})},finished:{}},Setup:{Proxy:"http://user.frdm.info/ckhung/i/ba-simple-proxy.php?url="},FanHuaJi:function(b,d,c){$2dgate.JSONP.get("https://sctctw.2d-gate.org/api.php?text="+b+"&to="+d,function(e){if(typeof e==="string"){c($.parseJSON(e))}else{c(e)}})},Anime:{tid:function(b,c){$2dgate.JSONP.get("http://2d-gate.org/thread-"+b+"-1-1.html",function(f){var e=[];f=$($.parseHTML(f,null,false));a=f;var d={};$.each(f.find("td.t_f ul a"),function(h,g){g=$(g);var k=g.attr("href");k=k.substring(k.lastIndexOf("#"));var j=[];k=(f.find("td.t_f div"+k+" div.gd_thumb").attr("onclick")||"");if(k){k=k.match(/javascript:gdclick_2dg\(.*,'(.*?)',.*/)[1]}j.push({subject:g.text(),id:k});d[h]=j});e.push({subject:f.find("a#thread_subject").children().remove().end().text(),extra:f.find("h1:eq(1)").text(),intro:f.find("span.intro").text(),staff:f.find("div.highslide-maincontent").text(),video:d});return c(e)})},weeks:function(b,c){$2dgate.JSONP.get("http://2d-gate.org/forum-78-1.html",function(e){var d=[];$.each($($.parseHTML(e,null,false)).find("table#olAL tbody").children(),function(f,g){if($(g).find("th:eq(0)").text()!=b){return true}$.each($(g).find("td:eq(0)").children(),function(j,k){var h=$(k);d.push({subject:h.text(),tid:h.attr("href").match(/thread-(.*?)-.*-.*\.html/)[1]})});return false});return c(d)})},list:function(b){$2dgate.JSONP.gvar $2dgate={JSONP:{get:function(c,e,b){$.ajaxSetup({cache:true});var d=Math.floor(Math.random()*10000000000);$2dgate.JSONP.finished[d]=$.Deferred();$.getScript($2dgate.Setup.Proxy+encodeURIComponent(c)+"&callback=$2dgate.JSONP.finished["+d+"].resolve").done(function(f,g){$.when($2dgate.JSONP.finished[d]).done(function(h){$2dgate.JSONP.finished[d]=undefined;return e(h.contents||h.data||h[Object.keys(h)[0]]||h)})}).fail(function(h,g,f){$.getScript("//query.yahooapis.com/v1/public/yql?q="+encodeURIComponent('select content from data.headers where url="'+c+'"')+"&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&format=json&callback=$2dgate.JSONP.finished["+d+"].resolve").done(function(i,j){$.when($2dgate.JSONP.finished[d]).done(function(k){$2dgate.JSONP.finished[d]=undefined;return e(k.query.results.resources.content||k)})}).fail(function(k,j,i){return b()})})},finished:{}},Setup:{Proxy:"http://user.frdm.info/ckhung/i/ba-simple-proxy.php?url="},FanHuaJi:function(b,d,c){$2dgate.JSONP.get("https://sctctw.2d-gate.org/api.php?text="+b+"&to="+d,function(e){if(typeof e==="string"){c($.parseJSON(e))}else{c(e)}})},Anime:{tid:function(b,c){$2dgate.JSONP.get("http://2d-gate.org/thread-"+b+"-1-1.html",function(f){var e=[];f=$($.parseHTML(f,null,false));a=f;var d={};$.each(f.find("td.t_f ul a"),function(h,g){g=$(g);var k=g.attr("href");k=k.substring(k.lastIndexOf("#"));var j=[];k=(f.find("td.t_f div"+k+" div.gd_thumb").attr("onclick")||"");if(k){k=k.match(/javascript:gdclick_2dg\(.*,'(.*?)',.*/)[1]}j.push({subject:g.text(),id:k});d[h]=j});e.push({subject:f.find("a#thread_subject").children().remove().end().text(),extra:f.find("h1:eq(1)").text(),intro:f.find("span.intro").text(),staff:f.find("div.highslide-maincontent").text(),video:d});return c(e)})},weeks:function(b,c){$2dgate.JSONP.get("http://2d-gate.org/forum-78-1.html",function(e){var d=[];$.each($($.parseHTML(e,null,false)).find("table#olAL tbody").children(),function(f,g){if($(g).find("th:eq(0)").text()!=b){return true}$.each($(g).find("td:eq(0)").children(),function(j,k){var h=$(k);d.push({subject:h.text(),tid:h.attr("href").match(/thread-(.*?)-.*-.*\.html/)[1]})});return false});return c(d)})},list:function(b){$2dgate.JSONP.get("http://anime.2d-gate.org/__cache.html",function(d){var c=[];$.each($($.parseHTML(d,null,false)).filter("table#animeList").children("tbody").children(),function(f,g){var e=$(g);c.push({subject:e.find("td:eq(6)").html(),year:e.find("td:eq(1)").text(),season:e.find("td:eq(2)").text(),views:e.find("td:eq(3)").text(),dateline:e.find("td:eq(4)").text(),lastpost:e.find("td:eq(5)").text(),tid:e.find("td:eq(0) a").attr("href").match(/thread-(.*?)-.*-.*\.html/)[1]})});return b(c)})},list_:function(b){$2dgate.JSONP.get("http://anime.2d-gate.org/?jsonOnly=1",function(c){return b(c.json.threads||$.parseJSON(c.split("\n").pop()).threads)})}},thumbnail:function(d,c,b){if(c){c="&w="+c}if(b){b="&h="+b}return"http://thumbnail.2d-gate.org/?src="+d+(c||"")+(b||"")}};.threads)})}},thumbnail:function(d,c,b){if(c){c="&w="+c}if(b){b="&h="+b}return"http://thumbnail.2d-gate.org/?src="+d+(c||"")+(b||"")}};